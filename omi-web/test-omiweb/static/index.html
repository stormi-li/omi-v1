<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTTP and WebSocket Demo</title>
</head>

<body>
    <h1>HTTP and WebSocket Demo</h1>

    <button id="httpButton">Send HTTP Request</button>
    <button id="wsButton">Send WebSocket Request</button>
    <button id="home">Jump to home</button>
    <div id="responseContainer">
        <h2>Response:</h2>
        <pre id="responseText">No response yet...</pre>
    </div>

    <script>
        let httqrequest = "hello_server/request"
        let wsrequest = "helloworldwebsocket/request"
        let srcrequest = "home.html"
        document.getElementById("home").addEventListener("click", () => { window.location.href = srcrequest })
        // HTTP 请求处理函数
        document.getElementById("httpButton").addEventListener("click", () => {
            fetch(httqrequest) // HTTP 请求的 URL
                .then(response => response.text())
                .then(data => {
                    document.getElementById("responseText").textContent = `HTTP Response: ${data}`;
                })
                .catch(error => {
                    console.error("HTTP request error:", error);
                    document.getElementById("responseText").textContent = `HTTP Error: ${error.message}`;
                });
        });

        // WebSocket 请求处理函数
        document.getElementById("wsButton").addEventListener("click", () => {
            const socket = new WebSocket(wsrequest);

            // 连接成功时
            socket.onopen = () => {
                console.log("WebSocket connection established.");
            };

            // 接收到 WebSocket 消息时
            socket.onmessage = (event) => {
                console.log("Message from WebSocket server:", event.data);
                document.getElementById("responseText").textContent = `WebSocket Response: ${event.data}`;
            };

            // WebSocket 连接出错时
            socket.onerror = (error) => {
                console.error("WebSocket error:", error);
                document.getElementById("responseText").textContent = `WebSocket Error: ${error.message}`;
            };

            // WebSocket 关闭时
            socket.onclose = () => {
                console.log("WebSocket connection closed.");
            };
        });
    </script>
</body>

</html>